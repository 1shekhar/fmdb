<!DOCTYPE html>
<html lang="en">
  <head>
    <title>FMDB  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="FMDB  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">FMDB 2.7.7 Docs</a> (89% documented)</p>
        <p class="header-right"><a href="https://github.com/ccgus/fmdb"><img src="img/gh.png"/>View on GitHub</a></p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">FMDB Reference</a>
        <img id="carat" src="img/carat.png" />
        FMDB  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Categories.html">Categories</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Categories/NSObject%28FMDatabasePoolDelegate%29.html">NSObject(FMDatabasePoolDelegate)</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/FMDatabase.html">FMDatabase</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/FMDatabasePool.html">FMDatabasePool</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/FMDatabaseQueue.html">FMDatabaseQueue</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/FMResultSet.html">FMResultSet</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/FMStatement.html">FMStatement</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Constants.html">Constants</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Constants.html#/c:@FMDBVersionNumber">FMDBVersionNumber</a>
              </li>
              <li class="nav-group-task">
                <a href="Constants.html#/c:@FMDBVersionString">FMDBVersionString</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enumerations</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums/FMDBCheckpointMode.html">FMDBCheckpointMode</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums/SqliteValueType.html">SqliteValueType</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Type%20Definitions.html">Type Definitions</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Type%20Definitions.html#/c:FMDatabase.h@T@FMDBExecuteStatementsCallbackBlock">FMDBExecuteStatementsCallbackBlock</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <h1 id='fmdb-v2-7' class='heading'>FMDB v2.7</h1>

<!--[![Platform](https://img.shields.io/cocoapods/p/FMDB.svg?style=flat)](http://cocoadocs.org/docsets/Alamofire)-->

<p><a href="https://img.shields.io/cocoapods/v/FMDB.svg"><img src="https://img.shields.io/cocoapods/v/FMDB.svg" alt="CocoaPods Compatible"></a>
<a href="https://github.com/Carthage/Carthage"><img src="https://img.shields.io/badge/Carthage-compatible-4BC51D.svg?style=flat" alt="Carthage Compatible"></a></p>

<p>This is an Objective-C wrapper around <a href="https://sqlite.org/">SQLite</a>.</p>
<h2 id='the-fmdb-mailing-list' class='heading'>The FMDB Mailing List:</h2>

<p><a href="https://groups.google.com/group/fmdb">https://groups.google.com/group/fmdb</a></p>
<h2 id='read-the-sqlite-faq' class='heading'>Read the SQLite FAQ:</h2>

<p><a href="https://www.sqlite.org/faq.html">https://www.sqlite.org/faq.html</a></p>

<p>Since FMDB is built on top of SQLite, you&rsquo;re going to want to read this page top to bottom at least once.  And while you&rsquo;re there, make sure to bookmark the SQLite Documentation page: <a href="https://www.sqlite.org/docs.html">https://www.sqlite.org/docs.html</a></p>
<h2 id='contributing' class='heading'>Contributing</h2>

<p>Do you have an awesome idea that deserves to be in FMDB?  You might consider pinging ccgus first to make sure he hasn&rsquo;t already ruled it out for some reason.  Otherwise pull requests are great, and make sure you stick to the local coding conventions.  However, please be patient and if you haven&rsquo;t heard anything from ccgus for a week or more, you might want to send a note asking what&rsquo;s up.</p>
<h2 id='installing' class='heading'>Installing</h2>
<h3 id='cocoapods' class='heading'>CocoaPods</h3>

<p>FMDB can be installed using <a href="https://cocoapods.org/">CocoaPods</a>.</p>

<p>If you haven&rsquo;t done so already, you might want to initialize the project, to have it produce a <code>Podfile</code> template for you:</p>
<pre class="highlight plaintext"><code>$ pod init
</code></pre>

<p>Then, edit the <code>Podfile</code>, adding <code>FMDB</code>:</p>
<pre class="highlight ruby"><code><span class="c1"># Uncomment the next line to define a global platform for your project</span>
<span class="c1"># platform :ios, '9.0'</span>

<span class="n">target</span> <span class="s1">'MyApp'</span> <span class="k">do</span>
    <span class="c1"># Comment the next line if you're not using Swift and don't want to use dynamic frameworks</span>
    <span class="n">use_frameworks!</span>

    <span class="c1"># Pods for MyApp2</span>

    <span class="n">pod</span> <span class="s1">'FMDB'</span>
    <span class="c1"># pod 'FMDB/FTS'   # FMDB with FTS</span>
    <span class="c1"># pod 'FMDB/standalone'   # FMDB with latest SQLite amalgamation source</span>
    <span class="c1"># pod 'FMDB/standalone/FTS'   # FMDB with latest SQLite amalgamation source and FTS</span>
    <span class="c1"># pod 'FMDB/SQLCipher'   # FMDB with SQLCipher</span>
<span class="k">end</span>
</code></pre>

<p>Then install the pods:</p>
<pre class="highlight plaintext"><code>$ pod install
</code></pre>

<p>Then open the <code>.xcworkspace</code> rather than the <code>.xcodeproj</code>.</p>

<p>For more information on Cocoapods visit <a href="https://cocoapods.org">https://cocoapods.org</a>.</p>

<p><strong>If using FMDB with <a href="https://www.zetetic.net/sqlcipher/">SQLCipher</a> you must use the FMDB/SQLCipher subspec. The FMDB/SQLCipher subspec declares SQLCipher as a dependency, allowing FMDB to be compiled with the <code>-DSQLITE_HAS_CODEC</code> flag.</strong></p>
<h3 id='carthage' class='heading'>Carthage</h3>

<p>Once you make sure you have <a href="https://github.com/Carthage/Carthage/releases">the latest version of Carthage</a>, you can open up a command line terminal, navigate to your project&rsquo;s main directory, and then do the following commands:</p>
<pre class="highlight plaintext"><code>$ echo ' github "ccgus/fmdb" ' &gt; ./Cartfile
$ carthage update
</code></pre>

<p>You can then configure your project as outlined in Carthage&rsquo;s <a href="https://github.com/Carthage/Carthage#getting-started">Getting Started</a> (i.e. for iOS, adding the framework to the &ldquo;Link Binary with Libraries&rdquo; in your target and adding the <code>copy-frameworks</code> script; in macOS, adding the framework to the list of &ldquo;Embedded Binaries&rdquo;).</p>
<h2 id='fmdb-class-reference' class='heading'>FMDB Class Reference:</h2>

<p><a href="https://ccgus.github.io/fmdb/html/index.html">https://ccgus.github.io/fmdb/html/index.html</a></p>
<h2 id='automatic-reference-counting-arc-or-manual-memory-management' class='heading'>Automatic Reference Counting (ARC) or Manual Memory Management?</h2>

<p>You can use either style in your Cocoa project.  FMDB will figure out which you are using at compile time and do the right thing.</p>
<h2 id='what-39-s-new-in-fmdb-2-7' class='heading'>What&rsquo;s New in FMDB 2.7</h2>

<p>FMDB 2.7 attempts to support a more natural interface. This represents a fairly significant change for Swift developers (audited for nullability; shifted to properties in external interfaces where possible rather than methods; etc.). For Objective-C developers, this should be a fairly seamless transition (unless you were using the ivars that were previously exposed in the public interface, which you shouldn&rsquo;t have been doing, anyway!). </p>
<h3 id='nullability-and-swift-optionals' class='heading'>Nullability and Swift Optionals</h3>

<p>FMDB 2.7 is largely the same as prior versions, but has been audited for nullability. For Objective-C users, this simply means that if you perform a static analysis of your FMDB-based project, you may receive more meaningful warnings as you review your project, but there are likely to be few, if any, changes necessary in your code.</p>

<p>For Swift users, this nullability audit results in changes that are not entirely backward compatible with FMDB 2.6, but is a little more Swifty. Before FMDB was audited for nullability, Swift was forced to defensively assume that variables were optional, but the library now more accurately knows which properties and method parameters are optional, and which are not.</p>

<p>This means, though, that Swift code written for FMDB 2.7 may require changes. For example, consider the following Swift 3/Swift 4 code for FMDB 2.6:</p>
<pre class="highlight swift"><code><span class="n">queue</span><span class="o">.</span><span class="n">inTransaction</span> <span class="p">{</span> <span class="n">db</span><span class="p">,</span> <span class="n">rollback</span> <span class="k">in</span>
    <span class="k">do</span> <span class="p">{</span>
        <span class="k">guard</span> <span class="k">let</span> <span class="nv">db</span> <span class="o">==</span> <span class="n">db</span> <span class="k">else</span> <span class="p">{</span>
            <span class="c1">// handle error here</span>
            <span class="k">return</span>
        <span class="p">}</span>

        <span class="k">try</span> <span class="n">db</span><span class="o">.</span><span class="nf">executeUpdate</span><span class="p">(</span><span class="s">"INSERT INTO foo (bar) VALUES (?)"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">try</span> <span class="n">db</span><span class="o">.</span><span class="nf">executeUpdate</span><span class="p">(</span><span class="s">"INSERT INTO foo (bar) VALUES (?)"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
        <span class="n">rollback</span><span class="p">?</span><span class="o">.</span><span class="n">pointee</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>Because FMDB 2.6 was not audited for nullability, Swift inferred that <code>db</code> and <code>rollback</code> were optionals. But, now, in FMDB 2.7, Swift now knows that, for example, neither <code>db</code> nor <code>rollback</code> above can be <code>nil</code>, so they are no longer optionals. Thus it becomes:</p>
<pre class="highlight swift"><code><span class="n">queue</span><span class="o">.</span><span class="n">inTransaction</span> <span class="p">{</span> <span class="n">db</span><span class="p">,</span> <span class="n">rollback</span> <span class="k">in</span>
    <span class="k">do</span> <span class="p">{</span>
        <span class="k">try</span> <span class="n">db</span><span class="o">.</span><span class="nf">executeUpdate</span><span class="p">(</span><span class="s">"INSERT INTO foo (bar) VALUES (?)"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">try</span> <span class="n">db</span><span class="o">.</span><span class="nf">executeUpdate</span><span class="p">(</span><span class="s">"INSERT INTO foo (bar) VALUES (?)"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
        <span class="n">rollback</span><span class="o">.</span><span class="n">pointee</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
<h3 id='custom-functions' class='heading'>Custom Functions</h3>

<p>In the past, when writing custom functions, you would have to generally include your own <code>@autoreleasepool</code> block to avoid problems when writing functions that scanned through a large table. Now, FMDB will automatically wrap it in an autorelease pool, so you don&rsquo;t have to.</p>

<p>Also, in the past, when retrieving the values passed to the function, you had to drop down to the SQLite C API and include your own <code>sqlite3_value_XXX</code> calls. There are now <code><a href="Classes/FMDatabase.html">FMDatabase</a></code> methods, <code>valueInt</code>, <code>valueString</code>, etc., so you can stay within Swift and/or Objective-C, without needing to call the C functions yourself. Likewise, when specifying the return values, you no longer need to call <code>sqlite3_result_XXX</code> C API, but rather you can use <code><a href="Classes/FMDatabase.html">FMDatabase</a></code> methods, <code>resultInt</code>, <code>resultString</code>, etc. There is a new <code>enum</code> for <code>valueType</code> called <code><a href="Enums/SqliteValueType.html">SqliteValueType</a></code>, which can be used for checking the type of parameter passed to the custom function.</p>

<p>Thus, you can do something like (as of Swift 3):</p>
<pre class="highlight swift"><code><span class="n">db</span><span class="o">.</span><span class="nf">makeFunctionNamed</span><span class="p">(</span><span class="s">"RemoveDiacritics"</span><span class="p">,</span> <span class="nv">arguments</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span> <span class="n">context</span><span class="p">,</span> <span class="n">argc</span><span class="p">,</span> <span class="n">argv</span> <span class="k">in</span>
    <span class="k">guard</span> <span class="n">db</span><span class="o">.</span><span class="nf">valueType</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="o">.</span><span class="n">text</span> <span class="o">||</span> <span class="n">db</span><span class="o">.</span><span class="nf">valueType</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">==</span> <span class="o">.</span><span class="n">null</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">db</span><span class="o">.</span><span class="nf">resultError</span><span class="p">(</span><span class="s">"Expected string parameter"</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="n">context</span><span class="p">)</span>
        <span class="k">return</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="k">let</span> <span class="nv">string</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="nf">valueString</span><span class="p">(</span><span class="n">argv</span><span class="p">[</span><span class="mi">0</span><span class="p">])?</span><span class="o">.</span><span class="nf">folding</span><span class="p">(</span><span class="nv">options</span><span class="p">:</span> <span class="o">.</span><span class="n">diacriticInsensitive</span><span class="p">,</span> <span class="nv">locale</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">db</span><span class="o">.</span><span class="nf">resultString</span><span class="p">(</span><span class="n">string</span><span class="p">,</span> <span class="nv">context</span><span class="p">:</span> <span class="n">context</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">db</span><span class="o">.</span><span class="nf">resultNull</span><span class="p">(</span><span class="nv">context</span><span class="p">:</span> <span class="n">context</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>And you can then use that function in your SQL (in this case, matching both &ldquo;Jose&rdquo; and &ldquo;José&rdquo;):</p>
<pre class="highlight sql"><code><span class="k">SELECT</span> <span class="o">*</span> <span class="k">FROM</span> <span class="n">employees</span> <span class="k">WHERE</span> <span class="n">RemoveDiacritics</span><span class="p">(</span><span class="n">first_name</span><span class="p">)</span> <span class="k">LIKE</span> <span class="s1">'jose'</span>
</code></pre>

<p>Note, the method <code>makeFunctionNamed:maximumArguments:withBlock:</code> has been renamed to <code>makeFunctionNamed:arguments:block:</code>, to more accurately reflect the functional intent of the second parameter.</p>
<h3 id='api-changes' class='heading'>API Changes</h3>

<p>In addition to the <code>makeFunctionNamed</code> noted above, there are a few other API changes. Specifically, </p>

<ul>
<li><p>To become consistent with the rest of the API, the methods <code>objectForColumnName</code> and <code>UTF8StringForColumnName</code> have been renamed to <code>objectForColumn</code> and <code>UTF8StringForColumn</code>.</p></li>
<li><p>Note, the <code>objectForColumn</code> (and the associted subscript operator) now returns <code>nil</code> if an invalid column name/index is passed to it. It used to return <code>NSNull</code>.</p></li>
<li><p>To avoid confusion with <code><a href="Classes/FMDatabaseQueue.html">FMDatabaseQueue</a></code> method <code>inTransaction</code>, which performs transactions, the <code><a href="Classes/FMDatabase.html">FMDatabase</a></code> method to determine whether you are in a transaction or not, <code>inTransaction</code>, has been replaced with a read-only property, <code>isInTransaction</code>. </p></li>
<li><p>Several functions have been converted to properties, namely, <code>databasePath</code>, <code>maxBusyRetryTimeInterval</code>, <code>shouldCacheStatements</code>, <code>sqliteHandle</code>, <code>hasOpenResultSets</code>, <code>lastInsertRowId</code>, <code>changes</code>, <code>goodConnection</code>, <code>columnCount</code>, <code>resultDictionary</code>, <code>applicationID</code>, <code>applicationIDString</code>, <code>userVersion</code>, <code>countOfCheckedInDatabases</code>, <code>countOfCheckedOutDatabases</code>, and <code>countOfOpenDatabases</code>. For Objective-C users, this has little material impact, but for Swift users, it results in a slightly more natural interface. Note: For Objective-C developers, previously versions of FMDB exposed many ivars (but we hope you weren&rsquo;t using them directly, anyway!), but the implmentation details for these are no longer exposed.</p></li>
</ul>
<h3 id='url-methods' class='heading'>URL Methods</h3>

<p>In keeping with Apple&rsquo;s shift from paths to URLs, there are now <code>NSURL</code> renditions of the various <code>init</code> methods, previously only accepting paths. </p>
<h2 id='usage' class='heading'>Usage</h2>

<p>There are three main classes in FMDB:</p>

<ol>
<li><code><a href="Classes/FMDatabase.html">FMDatabase</a></code> - Represents a single SQLite database.  Used for executing SQL statements.</li>
<li><code><a href="Classes/FMResultSet.html">FMResultSet</a></code> - Represents the results of executing a query on an <code><a href="Classes/FMDatabase.html">FMDatabase</a></code>.</li>
<li><code><a href="Classes/FMDatabaseQueue.html">FMDatabaseQueue</a></code> - If you&rsquo;re wanting to perform queries and updates on multiple threads, you&rsquo;ll want to use this class.  It&rsquo;s described in the &ldquo;Thread Safety&rdquo; section below.</li>
</ol>
<h3 id='database-creation' class='heading'>Database Creation</h3>

<p>An <code><a href="Classes/FMDatabase.html">FMDatabase</a></code> is created with a path to a SQLite database file.  This path can be one of these three:</p>

<ol>
<li>A file system path.  The file does not have to exist on disk.  If it does not exist, it is created for you.</li>
<li>An empty string (<code>@&quot;&quot;</code>).  An empty database is created at a temporary location.  This database is deleted when the <code><a href="Classes/FMDatabase.html">FMDatabase</a></code> connection is closed.</li>
<li><code>NULL</code>.  An in-memory database is created.  This database will be destroyed when the <code><a href="Classes/FMDatabase.html">FMDatabase</a></code> connection is closed.</li>
</ol>

<p>(For more information on temporary and in-memory databases, read the sqlite documentation on the subject: <a href="https://www.sqlite.org/inmemorydb.html">https://www.sqlite.org/inmemorydb.html</a>)</p>
<pre class="highlight objective_c"><code><span class="n">NSString</span> <span class="o">*</span><span class="n">path</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSTemporaryDirectory</span><span class="p">()</span> <span class="nf">stringByAppendingPathComponent</span><span class="p">:</span><span class="s">@"tmp.db"</span><span class="p">];</span>
<span class="n">FMDatabase</span> <span class="o">*</span><span class="n">db</span> <span class="o">=</span> <span class="p">[</span><span class="n">FMDatabase</span> <span class="nf">databaseWithPath</span><span class="p">:</span><span class="n">path</span><span class="p">];</span>
</code></pre>
<h3 id='opening' class='heading'>Opening</h3>

<p>Before you can interact with the database, it must be opened.  Opening fails if there are insufficient resources or permissions to open and/or create the database.</p>
<pre class="highlight objective_c"><code><span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">[</span><span class="n">db</span> <span class="nf">open</span><span class="p">])</span> <span class="p">{</span>
    <span class="c1">// [db release];   // uncomment this line in manual referencing code; in ARC, this is not necessary/permitted
</span>    <span class="n">db</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<h3 id='executing-updates' class='heading'>Executing Updates</h3>

<p>Any sort of SQL statement which is not a <code>SELECT</code> statement qualifies as an update.  This includes <code>CREATE</code>, <code>UPDATE</code>, <code>INSERT</code>, <code>ALTER</code>, <code>COMMIT</code>, <code>BEGIN</code>, <code>DETACH</code>, <code>DELETE</code>, <code>DROP</code>, <code>END</code>, <code>EXPLAIN</code>, <code>VACUUM</code>, and <code>REPLACE</code> statements (plus many more).  Basically, if your SQL statement does not begin with <code>SELECT</code>, it is an update statement.</p>

<p>Executing updates returns a single value, a <code>BOOL</code>.  A return value of <code>YES</code> means the update was successfully executed, and a return value of <code>NO</code> means that some error was encountered.  You may invoke the <code>-lastErrorMessage</code> and <code>-lastErrorCode</code> methods to retrieve more information.</p>
<h3 id='executing-queries' class='heading'>Executing Queries</h3>

<p>A <code>SELECT</code> statement is a query and is executed via one of the <code>-executeQuery...</code> methods.</p>

<p>Executing queries returns an <code><a href="Classes/FMResultSet.html">FMResultSet</a></code> object if successful, and <code>nil</code> upon failure.  You should use the <code>-lastErrorMessage</code> and <code>-lastErrorCode</code> methods to determine why a query failed.</p>

<p>In order to iterate through the results of your query, you use a <code>while()</code> loop.  You also need to &ldquo;step&rdquo; from one record to the other.  With FMDB, the easiest way to do that is like this:</p>
<pre class="highlight objective_c"><code><span class="n">FMResultSet</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="n">db</span> <span class="nf">executeQuery</span><span class="p">:</span><span class="s">@"SELECT * FROM myTable"</span><span class="p">];</span>
<span class="k">while</span> <span class="p">([</span><span class="n">s</span> <span class="nf">next</span><span class="p">])</span> <span class="p">{</span>
    <span class="c1">//retrieve values for each record
</span><span class="p">}</span>
</code></pre>

<p>You must always invoke <code><a href="Classes/FMResultSet.html#/c:objc(cs)FMResultSet(im)next">-[FMResultSet next]</a></code> before attempting to access the values returned in a query, even if you&rsquo;re only expecting one:</p>
<pre class="highlight objective_c"><code><span class="n">FMResultSet</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="p">[</span><span class="n">db</span> <span class="nf">executeQuery</span><span class="p">:</span><span class="s">@"SELECT COUNT(*) FROM myTable"</span><span class="p">];</span>
<span class="k">if</span> <span class="p">([</span><span class="n">s</span> <span class="nf">next</span><span class="p">])</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">totalCount</span> <span class="o">=</span> <span class="p">[</span><span class="n">s</span> <span class="nf">intForColumnIndex</span><span class="p">:</span><span class="mi">0</span><span class="p">];</span>
<span class="p">}</span>
</code></pre>

<p><code><a href="Classes/FMResultSet.html">FMResultSet</a></code> has many methods to retrieve data in an appropriate format:</p>

<ul>
<li><code>intForColumn:</code></li>
<li><code>longForColumn:</code></li>
<li><code>longLongIntForColumn:</code></li>
<li><code>boolForColumn:</code></li>
<li><code>doubleForColumn:</code></li>
<li><code>stringForColumn:</code></li>
<li><code>dateForColumn:</code></li>
<li><code>dataForColumn:</code></li>
<li><code>dataNoCopyForColumn:</code></li>
<li><code>UTF8StringForColumn:</code></li>
<li><code>objectForColumn:</code></li>
</ul>

<p>Each of these methods also has a <code>{type}ForColumnIndex:</code> variant that is used to retrieve the data based on the position of the column in the results, as opposed to the column&rsquo;s name.</p>

<p>Typically, there&rsquo;s no need to <code>-close</code> an <code><a href="Classes/FMResultSet.html">FMResultSet</a></code> yourself, since that happens when either the result set is exhausted. However, if you only pull out a single request or any other number of requests which don&rsquo;t exhaust the result set, you will need to call the <code>-close</code> method on the <code><a href="Classes/FMResultSet.html">FMResultSet</a></code>.</p>
<h3 id='closing' class='heading'>Closing</h3>

<p>When you have finished executing queries and updates on the database, you should <code>-close</code> the <code><a href="Classes/FMDatabase.html">FMDatabase</a></code> connection so that SQLite will relinquish any resources it has acquired during the course of its operation.</p>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">db</span> <span class="nf">close</span><span class="p">];</span>
</code></pre>
<h3 id='transactions' class='heading'>Transactions</h3>

<p><code><a href="Classes/FMDatabase.html">FMDatabase</a></code> can begin and commit a transaction by invoking one of the appropriate methods or executing a begin/end transaction statement.</p>
<h3 id='multiple-statements-and-batch-stuff' class='heading'>Multiple Statements and Batch Stuff</h3>

<p>You can use <code><a href="Classes/FMDatabase.html">FMDatabase</a></code>&lsquo;s executeStatements:withResultBlock: to do multiple statements in a string:</p>
<pre class="highlight objective_c"><code><span class="n">NSString</span> <span class="o">*</span><span class="n">sql</span> <span class="o">=</span> <span class="s">@"create table bulktest1 (id integer primary key autoincrement, x text);"</span>
                 <span class="s">"create table bulktest2 (id integer primary key autoincrement, y text);"</span>
                 <span class="s">"create table bulktest3 (id integer primary key autoincrement, z text);"</span>
                 <span class="s">"insert into bulktest1 (x) values ('XXX');"</span>
                 <span class="s">"insert into bulktest2 (y) values ('YYY');"</span>
                 <span class="s">"insert into bulktest3 (z) values ('ZZZ');"</span><span class="p">;</span>

<span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">db</span> <span class="nf">executeStatements</span><span class="p">:</span><span class="n">sql</span><span class="p">];</span>

<span class="n">sql</span> <span class="o">=</span> <span class="s">@"select count(*) as count from bulktest1;"</span>
       <span class="s">"select count(*) as count from bulktest2;"</span>
       <span class="s">"select count(*) as count from bulktest3;"</span><span class="p">;</span>

<span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">db</span> <span class="nf">executeStatements</span><span class="p">:</span><span class="n">sql</span> <span class="nf">withResultBlock</span><span class="p">:</span><span class="o">^</span><span class="kt">int</span><span class="p">(</span><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">dictionary</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSInteger</span> <span class="n">count</span> <span class="o">=</span> <span class="p">[</span><span class="n">dictionary</span><span class="p">[</span><span class="s">@"count"</span><span class="p">]</span> <span class="nf">integerValue</span><span class="p">];</span>
    <span class="n">XCTAssertEqual</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s">@"expected one record for dictionary %@"</span><span class="p">,</span> <span class="n">dictionary</span><span class="p">);</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}];</span>
</code></pre>
<h3 id='data-sanitization' class='heading'>Data Sanitization</h3>

<p>When providing a SQL statement to FMDB, you should not attempt to &ldquo;sanitize&rdquo; any values before insertion.  Instead, you should use the standard SQLite binding syntax:</p>
<pre class="highlight sql"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">myTable</span> <span class="k">VALUES</span> <span class="p">(</span><span class="o">?</span><span class="p">,</span> <span class="o">?</span><span class="p">,</span> <span class="o">?</span><span class="p">,</span> <span class="o">?</span><span class="p">)</span>
</code></pre>

<p>The <code>?</code> character is recognized by SQLite as a placeholder for a value to be inserted.  The execution methods all accept a variable number of arguments (or a representation of those arguments, such as an <code>NSArray</code>, <code>NSDictionary</code>, or a <code>va_list</code>), which are properly escaped for you.</p>

<p>And, to use that SQL with the <code>?</code> placeholders from Objective-C:</p>
<pre class="highlight objective_c"><code><span class="n">NSInteger</span> <span class="n">identifier</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">name</span> <span class="o">=</span> <span class="s">@"Liam O'Flaherty (</span><span class="se">\"</span><span class="s">the famous Irish author</span><span class="se">\"</span><span class="s">)"</span><span class="p">;</span>
<span class="n">NSDate</span> <span class="o">*</span><span class="n">date</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSDate</span> <span class="nf">date</span><span class="p">];</span>
<span class="n">NSString</span> <span class="o">*</span><span class="n">comment</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>

<span class="n">BOOL</span> <span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">db</span> <span class="nf">executeUpdate</span><span class="p">:</span><span class="s">@"INSERT INTO authors (identifier, name, date, comment) VALUES (?, ?, ?, ?)"</span><span class="p">,</span> <span class="err">@</span><span class="p">(</span><span class="n">identifier</span><span class="p">),</span> <span class="n">name</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">comment</span> <span class="p">?:</span> <span class="p">[</span><span class="n">NSNull</span> <span class="nf">null</span><span class="p">]];</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"error = %@"</span><span class="p">,</span> <span class="p">[</span><span class="n">db</span> <span class="nf">lastErrorMessage</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre>

<blockquote>
<p><strong>Note:</strong> Fundamental data types, like the <code>NSInteger</code> variable <code>identifier</code>, should be as a <code>NSNumber</code> objects, achieved by using the <code>@</code> syntax, shown above. Or you can use the <code>[NSNumber numberWithInt:identifier]</code> syntax, too.</p>

<p>Likewise, SQL <code>NULL</code> values should be inserted as <code>[NSNull null]</code>. For example, in the case of <code>comment</code> which might be <code>nil</code> (and is in this example), you can use the <code>comment ?: [NSNull null]</code> syntax, which will insert the string if <code>comment</code> is not <code>nil</code>, but will insert <code>[NSNull null]</code> if it is <code>nil</code>.</p>
</blockquote>

<p>In Swift, you would use <code>executeUpdate(values:)</code>, which not only is a concise Swift syntax, but also <code>throws</code> errors for proper error handling:</p>
<pre class="highlight swift"><code><span class="k">do</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">identifier</span> <span class="o">=</span> <span class="mi">42</span>
    <span class="k">let</span> <span class="nv">name</span> <span class="o">=</span> <span class="s">"Liam O'Flaherty (</span><span class="se">\"</span><span class="s">the famous Irish author</span><span class="se">\"</span><span class="s">)"</span>
    <span class="k">let</span> <span class="nv">date</span> <span class="o">=</span> <span class="kt">Date</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">comment</span><span class="p">:</span> <span class="kt">String</span><span class="p">?</span> <span class="o">=</span> <span class="kc">nil</span>

    <span class="k">try</span> <span class="n">db</span><span class="o">.</span><span class="nf">executeUpdate</span><span class="p">(</span><span class="s">"INSERT INTO authors (identifier, name, date, comment) VALUES (?, ?, ?, ?)"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="p">[</span><span class="n">identifier</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">comment</span> <span class="p">??</span> <span class="kt">NSNull</span><span class="p">()])</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"error = </span><span class="se">\(</span><span class="n">error</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre>

<blockquote>
<p><strong>Note:</strong> In Swift, you don&rsquo;t have to wrap fundamental numeric types like you do in Objective-C. But if you are going to insert an optional string, you would probably use the <code>comment ?? NSNull()</code> syntax (i.e., if it is <code>nil</code>, use <code>NSNull</code>, otherwise use the string).</p>
</blockquote>

<p>Alternatively, you may use named parameters syntax:</p>
<pre class="highlight sql"><code><span class="k">INSERT</span> <span class="k">INTO</span> <span class="n">authors</span> <span class="p">(</span><span class="n">identifier</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="k">comment</span><span class="p">)</span> <span class="k">VALUES</span> <span class="p">(:</span><span class="n">identifier</span><span class="p">,</span> <span class="p">:</span><span class="n">name</span><span class="p">,</span> <span class="p">:</span><span class="n">date</span><span class="p">,</span> <span class="p">:</span><span class="k">comment</span><span class="p">)</span>
</code></pre>

<p>The parameters <em>must</em> start with a colon. SQLite itself supports other characters, but internally the dictionary keys are prefixed with a colon, do <strong>not</strong> include the colon in your dictionary keys.</p>
<pre class="highlight objective_c"><code><span class="n">NSDictionary</span> <span class="o">*</span><span class="n">arguments</span> <span class="o">=</span> <span class="p">@{</span><span class="s">@"identifier"</span><span class="o">:</span> <span class="err">@</span><span class="p">(</span><span class="n">identifier</span><span class="p">),</span> <span class="s">@"name"</span><span class="o">:</span> <span class="n">name</span><span class="p">,</span> <span class="s">@"date"</span><span class="o">:</span> <span class="n">date</span><span class="p">,</span> <span class="s">@"comment"</span><span class="o">:</span> <span class="n">comment</span> <span class="p">?:</span> <span class="p">[</span><span class="n">NSNull</span> <span class="nf">null</span><span class="p">]};</span>
<span class="n">BOOL</span> <span class="n">success</span> <span class="o">=</span> <span class="p">[</span><span class="n">db</span> <span class="nf">executeUpdate</span><span class="p">:</span><span class="s">@"INSERT INTO authors (identifier, name, date, comment) VALUES (:identifier, :name, :date, :comment)"</span> <span class="nf">withParameterDictionary</span><span class="p">:</span><span class="n">arguments</span><span class="p">];</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">success</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSLog</span><span class="p">(</span><span class="s">@"error = %@"</span><span class="p">,</span> <span class="p">[</span><span class="n">db</span> <span class="nf">lastErrorMessage</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre>

<p>The key point is that one should not use <code>NSString</code> method <code>stringWithFormat</code> to manually insert values into the SQL statement, itself. Nor should one Swift string interpolation to insert values into the SQL. Use <code>?</code> placeholders for values to be inserted into the database (or used in <code>WHERE</code> clauses in <code>SELECT</code> statements).</p>

<h2 id="threads">Using FMDatabaseQueue and Thread Safety.</h2>

<p>Using a single instance of <code><a href="Classes/FMDatabase.html">FMDatabase</a></code> from multiple threads at once is a bad idea.  It has always been OK to make a <code><a href="Classes/FMDatabase.html">FMDatabase</a></code> object <em>per thread</em>.  Just don&rsquo;t share a single instance across threads, and definitely not across multiple threads at the same time.  Bad things will eventually happen and you&rsquo;ll eventually get something to crash, or maybe get an exception, or maybe meteorites will fall out of the sky and hit your Mac Pro.  <em>This would suck</em>.</p>

<p><strong>So don&rsquo;t instantiate a single <code><a href="Classes/FMDatabase.html">FMDatabase</a></code> object and use it across multiple threads.</strong></p>

<p>Instead, use <code><a href="Classes/FMDatabaseQueue.html">FMDatabaseQueue</a></code>. Instantiate a single <code><a href="Classes/FMDatabaseQueue.html">FMDatabaseQueue</a></code> and use it across multiple threads. The <code><a href="Classes/FMDatabaseQueue.html">FMDatabaseQueue</a></code> object will synchronize and coordinate access across the multiple threads. Here&rsquo;s how to use it:</p>

<p>First, make your queue.</p>
<pre class="highlight objective_c"><code><span class="n">FMDatabaseQueue</span> <span class="o">*</span><span class="n">queue</span> <span class="o">=</span> <span class="p">[</span><span class="n">FMDatabaseQueue</span> <span class="nf">databaseQueueWithPath</span><span class="p">:</span><span class="n">aPath</span><span class="p">];</span>
</code></pre>

<p>Then use it like so:</p>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">queue</span> <span class="nf">inDatabase</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">FMDatabase</span> <span class="o">*</span><span class="n">db</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">db</span> <span class="nf">executeUpdate</span><span class="p">:</span><span class="s">@"INSERT INTO myTable VALUES (?)"</span><span class="p">,</span> <span class="mi">@1</span><span class="p">];</span>
    <span class="p">[</span><span class="n">db</span> <span class="nf">executeUpdate</span><span class="p">:</span><span class="s">@"INSERT INTO myTable VALUES (?)"</span><span class="p">,</span> <span class="mi">@2</span><span class="p">];</span>
    <span class="p">[</span><span class="n">db</span> <span class="nf">executeUpdate</span><span class="p">:</span><span class="s">@"INSERT INTO myTable VALUES (?)"</span><span class="p">,</span> <span class="mi">@3</span><span class="p">];</span>

    <span class="n">FMResultSet</span> <span class="o">*</span><span class="n">rs</span> <span class="o">=</span> <span class="p">[</span><span class="n">db</span> <span class="nf">executeQuery</span><span class="p">:</span><span class="s">@"select * from foo"</span><span class="p">];</span>
    <span class="k">while</span> <span class="p">([</span><span class="n">rs</span> <span class="nf">next</span><span class="p">])</span> <span class="p">{</span>
        <span class="err">…</span>
    <span class="p">}</span>
<span class="p">}];</span>
</code></pre>

<p>An easy way to wrap things up in a transaction can be done like this:</p>
<pre class="highlight objective_c"><code><span class="p">[</span><span class="n">queue</span> <span class="nf">inTransaction</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="n">FMDatabase</span> <span class="o">*</span><span class="n">db</span><span class="p">,</span> <span class="n">BOOL</span> <span class="o">*</span><span class="n">rollback</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">db</span> <span class="nf">executeUpdate</span><span class="p">:</span><span class="s">@"INSERT INTO myTable VALUES (?)"</span><span class="p">,</span> <span class="mi">@1</span><span class="p">];</span>
    <span class="p">[</span><span class="n">db</span> <span class="nf">executeUpdate</span><span class="p">:</span><span class="s">@"INSERT INTO myTable VALUES (?)"</span><span class="p">,</span> <span class="mi">@2</span><span class="p">];</span>
    <span class="p">[</span><span class="n">db</span> <span class="nf">executeUpdate</span><span class="p">:</span><span class="s">@"INSERT INTO myTable VALUES (?)"</span><span class="p">,</span> <span class="mi">@3</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">whoopsSomethingWrongHappened</span><span class="p">)</span> <span class="p">{</span>
        <span class="o">*</span><span class="n">rollback</span> <span class="o">=</span> <span class="nb">YES</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// etc ...
</span><span class="p">}];</span>
</code></pre>

<p>The Swift equivalent would be:</p>
<pre class="highlight swift"><code><span class="n">queue</span><span class="o">.</span><span class="n">inTransaction</span> <span class="p">{</span> <span class="n">db</span><span class="p">,</span> <span class="n">rollback</span> <span class="k">in</span>
    <span class="k">do</span> <span class="p">{</span>
        <span class="k">try</span> <span class="n">db</span><span class="o">.</span><span class="nf">executeUpdate</span><span class="p">(</span><span class="s">"INSERT INTO myTable VALUES (?)"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">])</span>
        <span class="k">try</span> <span class="n">db</span><span class="o">.</span><span class="nf">executeUpdate</span><span class="p">(</span><span class="s">"INSERT INTO myTable VALUES (?)"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        <span class="k">try</span> <span class="n">db</span><span class="o">.</span><span class="nf">executeUpdate</span><span class="p">(</span><span class="s">"INSERT INTO myTable VALUES (?)"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="p">[</span><span class="mi">3</span><span class="p">])</span>

        <span class="k">if</span> <span class="n">whoopsSomethingWrongHappened</span> <span class="p">{</span>
            <span class="n">rollback</span><span class="o">.</span><span class="n">pointee</span> <span class="o">=</span> <span class="kc">true</span>
            <span class="k">return</span>
        <span class="p">}</span>

        <span class="c1">// etc ...</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
        <span class="n">rollback</span><span class="o">.</span><span class="n">pointee</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="nf">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>

<p>(Note, as of Swift 3, use <code>pointee</code>. But in Swift 2.3, use <code>memory</code> rather than <code>pointee</code>.)</p>

<p><code><a href="Classes/FMDatabaseQueue.html">FMDatabaseQueue</a></code> will run the blocks on a serialized queue (hence the name of the class).  So if you call <code><a href="Classes/FMDatabaseQueue.html">FMDatabaseQueue</a></code>&rsquo;s methods from multiple threads at the same time, they will be executed in the order they are received.  This way queries and updates won&rsquo;t step on each other&rsquo;s toes, and every one is happy.</p>

<p><strong>Note:</strong> The calls to <code><a href="Classes/FMDatabaseQueue.html">FMDatabaseQueue</a></code>&rsquo;s methods are blocking.  So even though you are passing along blocks, they will <strong>not</strong> be run on another thread.</p>
<h2 id='making-custom-sqlite-functions-based-on-blocks' class='heading'>Making custom sqlite functions, based on blocks.</h2>

<p>You can do this!  For an example, look for <code>-makeFunctionNamed:</code> in main.m</p>
<h2 id='swift' class='heading'>Swift</h2>

<p>You can use FMDB in Swift projects too.</p>

<p>To do this, you must:</p>

<ol>
<li>Copy the relevant <code>.m</code> and <code>.h</code> files from the FMDB <code>src</code> folder into your project.</li>
</ol>

<p>You can copy all of them (which is easiest), or only the ones you need. Likely you will need <a href="https://ccgus.github.io/fmdb/html/Classes/FMDatabase.html"><code><a href="Classes/FMDatabase.html">FMDatabase</a></code></a> and <a href="https://ccgus.github.io/fmdb/html/Classes/FMResultSet.html"><code><a href="Classes/FMResultSet.html">FMResultSet</a></code></a> at a minimum. <a href="https://ccgus.github.io/fmdb/html/Categories/FMDatabase+FMDatabaseAdditions.html"><code>FMDatabaseAdditions</code></a> provides some very useful convenience methods, so you will likely want that, too. If you are doing multithreaded access to a database, <a href="https://ccgus.github.io/fmdb/html/Classes/FMDatabaseQueue.html"><code><a href="Classes/FMDatabaseQueue.html">FMDatabaseQueue</a></code></a> is quite useful, too. If you choose to not copy all of the files from the <code>src</code> directory, though, you may want to update <code>FMDB.h</code> to only reference the files that you included in your project.</p>

<p>Note, if you&rsquo;re copying all of the files from the <code>src</code> folder into to your project (which is recommended), you may want to drag the individual files into your project, not the folder, itself, because if you drag the folder, you won&rsquo;t be prompted to add the bridging header (see next point).</p>

<ol>
<li>If prompted to create a &ldquo;bridging header&rdquo;, you should do so. If not prompted and if you don&rsquo;t already have a bridging header, add one.</li>
</ol>

<p>For more information on bridging headers, see <a href="https://developer.apple.com/library/ios/documentation/Swift/Conceptual/BuildingCocoaApps/MixandMatch.html#//apple_ref/doc/uid/TP40014216-CH10-XID_76">Swift and Objective-C in the Same Project</a>.</p>

<ol>
<li><p>In your bridging header, add a line that says:</p>
<pre class="highlight objective_c"><code><span class="cp">#import "FMDB.h"
</span></code></pre></li>
<li><p>Use the variations of <code>executeQuery</code> and <code>executeUpdate</code> with the <code>sql</code> and <code>values</code> parameters with <code>try</code> pattern, as shown below. These renditions of <code>executeQuery</code> and <code>executeUpdate</code> both <code>throw</code> errors in true Swift fashion.</p></li>
</ol>

<p>If you do the above, you can then write Swift code that uses <code><a href="Classes/FMDatabase.html">FMDatabase</a></code>. For example, as of Swift 3:</p>
<pre class="highlight swift"><code><span class="k">let</span> <span class="nv">fileURL</span> <span class="o">=</span> <span class="k">try!</span> <span class="kt">FileManager</span><span class="o">.</span><span class="k">default</span>
    <span class="o">.</span><span class="nf">url</span><span class="p">(</span><span class="nv">for</span><span class="p">:</span> <span class="o">.</span><span class="n">applicationSupportDirectory</span><span class="p">,</span> <span class="nv">in</span><span class="p">:</span> <span class="o">.</span><span class="n">userDomainMask</span><span class="p">,</span> <span class="nv">appropriateFor</span><span class="p">:</span> <span class="kc">nil</span><span class="p">,</span> <span class="nv">create</span><span class="p">:</span> <span class="kc">true</span><span class="p">)</span>
    <span class="o">.</span><span class="nf">appendingPathComponent</span><span class="p">(</span><span class="s">"test.sqlite"</span><span class="p">)</span>

<span class="k">let</span> <span class="nv">database</span> <span class="o">=</span> <span class="kt">FMDatabase</span><span class="p">(</span><span class="nv">url</span><span class="p">:</span> <span class="n">fileURL</span><span class="p">)</span>

<span class="k">guard</span> <span class="n">database</span><span class="o">.</span><span class="nf">open</span><span class="p">()</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"Unable to open database"</span><span class="p">)</span>
    <span class="k">return</span>
<span class="p">}</span>

<span class="k">do</span> <span class="p">{</span>
    <span class="k">try</span> <span class="n">database</span><span class="o">.</span><span class="nf">executeUpdate</span><span class="p">(</span><span class="s">"create table test(x text, y text, z text)"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="k">try</span> <span class="n">database</span><span class="o">.</span><span class="nf">executeUpdate</span><span class="p">(</span><span class="s">"insert into test (x, y, z) values (?, ?, ?)"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="p">[</span><span class="s">"a"</span><span class="p">,</span> <span class="s">"b"</span><span class="p">,</span> <span class="s">"c"</span><span class="p">])</span>
    <span class="k">try</span> <span class="n">database</span><span class="o">.</span><span class="nf">executeUpdate</span><span class="p">(</span><span class="s">"insert into test (x, y, z) values (?, ?, ?)"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="p">[</span><span class="s">"e"</span><span class="p">,</span> <span class="s">"f"</span><span class="p">,</span> <span class="s">"g"</span><span class="p">])</span>

    <span class="k">let</span> <span class="nv">rs</span> <span class="o">=</span> <span class="k">try</span> <span class="n">database</span><span class="o">.</span><span class="nf">executeQuery</span><span class="p">(</span><span class="s">"select x, y, z from test"</span><span class="p">,</span> <span class="nv">values</span><span class="p">:</span> <span class="kc">nil</span><span class="p">)</span>
    <span class="k">while</span> <span class="n">rs</span><span class="o">.</span><span class="nf">next</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="nv">x</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="nf">string</span><span class="p">(</span><span class="nv">forColumn</span><span class="p">:</span> <span class="s">"x"</span><span class="p">),</span> <span class="k">let</span> <span class="nv">y</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="nf">string</span><span class="p">(</span><span class="nv">forColumn</span><span class="p">:</span> <span class="s">"y"</span><span class="p">),</span> <span class="k">let</span> <span class="nv">z</span> <span class="o">=</span> <span class="n">rs</span><span class="o">.</span><span class="nf">string</span><span class="p">(</span><span class="nv">forColumn</span><span class="p">:</span> <span class="s">"z"</span><span class="p">)</span> <span class="p">{</span>
            <span class="nf">print</span><span class="p">(</span><span class="s">"x = </span><span class="se">\(</span><span class="n">x</span><span class="se">)</span><span class="s">; y = </span><span class="se">\(</span><span class="n">y</span><span class="se">)</span><span class="s">; z = </span><span class="se">\(</span><span class="n">z</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="k">catch</span> <span class="p">{</span>
    <span class="nf">print</span><span class="p">(</span><span class="s">"failed: </span><span class="se">\(</span><span class="n">error</span><span class="o">.</span><span class="n">localizedDescription</span><span class="se">)</span><span class="s">"</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">database</span><span class="o">.</span><span class="nf">close</span><span class="p">()</span>
</code></pre>
<h2 id='history' class='heading'>History</h2>

<p>The history and changes are availbe on its <a href="https://github.com/ccgus/fmdb">GitHub page</a> and are summarized in the &ldquo;CHANGES_AND_TODO_LIST.txt&rdquo; file.</p>
<h2 id='contributors' class='heading'>Contributors</h2>

<p>The contributors to FMDB are contained in the &ldquo;Contributors.txt&rdquo; file.</p>
<h2 id='additional-projects-using-fmdb-which-might-be-interesting-to-the-discerning-developer' class='heading'>Additional projects using FMDB, which might be interesting to the discerning developer.</h2>

<ul>
<li>FMDBMigrationManager, A SQLite schema migration management system for FMDB: <a href="https://github.com/layerhq/FMDBMigrationManager">https://github.com/layerhq/FMDBMigrationManager</a></li>
<li>FCModel, An alternative to Core Data for people who like having direct SQL access: <a href="https://github.com/marcoarment/FCModel">https://github.com/marcoarment/FCModel</a></li>
</ul>
<h2 id='quick-notes-on-fmdb-39-s-coding-style' class='heading'>Quick notes on FMDB&rsquo;s coding style</h2>

<p>Spaces, not tabs.  Square brackets, not dot notation.  Look at what FMDB already does with curly brackets and such, and stick to that style.</p>
<h2 id='reporting-bugs' class='heading'>Reporting bugs</h2>

<p>Reduce your bug down to the smallest amount of code possible.  You want to make it super easy for the developers to see and reproduce your bug.  If it helps, pretend that the person who can fix your bug is active on shipping 3 major products, works on a handful of open source projects, has a newborn baby, and is generally very very busy.</p>

<p>And we&rsquo;ve even added a template function to main.m (FMDBReportABugFunction) in the FMDB distribution to help you out:</p>

<ul>
<li>Open up fmdb project in Xcode.</li>
<li>Open up main.m and modify the FMDBReportABugFunction to reproduce your bug.

<ul>
<li>Setup your table(s) in the code.</li>
<li>Make your query or update(s).</li>
<li>Add some assertions which demonstrate the bug.</li>
</ul></li>
</ul>

<p>Then you can bring it up on the FMDB mailing list by showing your nice and compact FMDBReportABugFunction, or you can report the bug via the github FMDB bug reporter.</p>

<p><strong>Optional:</strong></p>

<p>Figure out where the bug is, fix it, and send a patch in or bring that up on the mailing list.  Make sure all the other tests run after your modifications.</p>
<h2 id='support' class='heading'>Support</h2>

<p>The support channels for FMDB are the mailing list (see above), filing a bug here, or maybe on Stack Overflow.  So that is to say, support is provided by the community and on a voluntary basis.</p>

<p>FMDB development is overseen by Gus Mueller of Flying Meat.  If FMDB been helpful to you, consider purchasing an app from FM or telling all your friends about it.</p>
<h2 id='license' class='heading'>License</h2>

<p>The license for FMDB is contained in the &ldquo;License.txt&rdquo; file.</p>

<p>If you happen to come across either Gus Mueller or Rob Ryan in a bar, you might consider purchasing a drink of their choosing if FMDB has been useful to you.</p>

<p>(The drink is for them of course, shame on you for trying to keep it.)</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2020 <a class="link" href="https://github.com/ccgus/fmdb" target="_blank" rel="external">Gus Mueller, Flying Meat</a>. All rights reserved. (Last updated: 2020-05-09)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.13.3</a>, a <a class="link" href="https://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
